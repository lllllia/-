<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- page title -->
  <title>Stetho - Hotel Multipage Clean Bootstrap HTML5 Website Template</title>
  <!-- favicon -->
  <link rel="icon" href="favicon.ico" />
  <!-- bootstrap core CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- font awesome -->
  <link href="css/all.min.css" rel="stylesheet">
  <!-- owl carousel -->
  <link href="css/owl.carousel.min.css" rel="stylesheet">
  <link href="css/owl.theme.default.min.css" rel="stylesheet">
  <!-- venobox css -->
  <link rel="stylesheet" href="css/venobox.css">
  <!-- datepicker css -->
  <link rel="stylesheet" href="css/datepicker.min.css">
  <!-- custom styles for this template -->
  <link href="css/custom.css" rel="stylesheet">
  <link href="css/responsive.css" rel="stylesheet">
  <link href="css/helper.css" rel="stylesheet">
  <style>
    .list-box-carousel img {
      max-width: 80%;
      max-height:95%;
    }
  </style>
</head>

<body>
<!-- ================ Preloader ================ -->
<div id="preloader">
  <div class="spinner-grow" role="status"> <span class="sr-only">Loading...</span> </div>
</div>
<!-- ================ Preloader end ================ -->

<!-- ================ Header ================ -->
<header class="header">
  <!-- header upper -->
  <div class="header-upper-bar">
    <div class="container">
      <div class="row d-flex align-items-center">
        <div class="col-lg-8 col-md-6 col-sm-4 col-2">
          <!-- header navigation -->
          <nav class="navbar header-navigation navbar-expand-lg p-0">
            <!-- mobile Toggle -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTheme" aria-controls="navbarTheme" aria-expanded="false" aria-label="Toggle navigation"> <span></span> <span></span> <span></span> </button>
            <!-- mobile toggle end -->
            <!-- top Menu -->
            <div class="collapse navbar-collapse" id="navbarTheme">
              <ul class="navbar-nav align-items-start align-items-lg-center">
                <li class="active"><a class="nav-link" href="index.html">首页</a></li>
                <li><a class="nav-link" href="listing.html">预订</a></li>
                <li><a class="nav-link" href="contact-us.html">评价</a></li>
              </ul>
            </div>
            <!-- top menu end -->
          </nav>
          <!-- header navigation end -->
        </div>
        <div class="col-lg-4 col-md-6 col-sm-8 col-10 text-right">
          <!-- header right link -->
          <div class="header-right-link">
            <ul>
              <li><a class="nav-link" href="./admin/html/peronlist.html">个人订单</a></li>
              <li><a href="./admin/login.html"  class="header-request">转到后台</a></li>
            </ul>
          </div>
          <!-- header right link end -->
        </div>
      </div>
    </div>
  </div>
  <!-- header upper end -->
  <!-- header lover -->
  <div class="header-lover">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-3 col-md-12">
          <!-- brand -->
          <div class="logo"><a class="navbar-brand p-0" href="index.html"><img src="img/logo.png" alt=""></a></div>
          <!-- brand end -->
        </div>
        <div class="col-lg-9 col-md-12">
          <!-- header call us -->
          <div class="header-call-us">
            <ul>
              <li>
                <div class="iocn-holder"><i class="far fa-clock"></i></div>
                <div class="text-holder">
                  <h6>工作时间</h6>
                  <p class="mb-0">周一-----周天: 9.00am to 12.00pm</p>
                </div>
              </li>
              <li>
                <div class="iocn-holder"><i class="fas fa-phone-volume"></i></div>
                <div class="text-holder">
                  <h6>联系我们</h6>
                  <p class="mb-0"><a href="tel:123456789">+021 123 4567</a></p>
                </div>
              </li>
              <li>
                <div class="iocn-holder"><i class="far fa-envelope"></i></div>
                <div class="text-holder">
                  <h6>地址</h6>
                  <p class="mb-0"><a href="mailto:info@exampal.com">西南交通大学犀浦校区</a></p>
                </div>
              </li>
            </ul>
          </div>
          <!-- header call us end -->
        </div>
      </div>
    </div>
  </div>
  <!-- header lover end -->
</header>
<!-- ================ Header end ================ -->

<!-- ================ Inner banner ================ -->
<div class="inner-banner inner-banner-bg pt-70 pb-40">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-8 col-md-8 mb-30">
        <!-- page-title -->
        <div class="page-title">
          <h1>寻找适合你的房间</h1>
        </div>
        <!-- page-title end -->
      </div>
      <div class="col-lg-4 col-md-4 mb-30">
        <!-- breadcrumb -->
        <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><a href="#">首页</a></li>
          <li class="breadcrumb-item active">预订</li>
        </ol>
        <!-- breadcrumb end -->
      </div>
    </div>
  </div>
</div>
<!-- ================ Inner banner end ================ -->

<!-- ================ Listing page ================ -->
<div class="listing-page pt-70 pb-40">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <aside>
          <!-- sidebar -->
          <div class="desktop-filter-sidebar">
            <!-- filter widget -->
            <div class="filter-widget mb-20">
              <div class="accordion filter-accordion" id="filter-widget-accordion4-d">
                <div class="card">
                  <div class="card-header" id="headingOne4-d"> <a class="btn btn-link w-100 text-left" href="" data-toggle="collapse" data-target="#collapseOne4-m" aria-expanded="true" aria-controls="collapseOne4-m">
                    <!-- title widget -->
                    <div class="filter-title-widget">
                      <h3>要求 <i class="fas fa-plus-square float-right"></i> <i class="fas fa-minus-square float-right"></i></h3>
                    </div>
                    <!-- title widget end -->
                  </a> </div>
                  <div id="collapseOne4-m" class="collapse show mt-10" aria-labelledby="headingOne4-d" data-parent="#filter-widget-accordion4-d">
                    <div class="card-body">
                      <ul class="list-inline select-all mb-10">
                      </ul>
                      <div class="table-responsive">
                        <table class="table table-bordered bg-gray w-100 border-0">
                          <tr>
                            <td>入住时间:</td>
                            <td id="check-in-date0"></td>
                          </tr>
                          <tr>
                            <td>退房时间:</td>
                            <td id="check-out-date0"></td>
                          </tr>
                          <tr>
                            <td id="room-count0">房间数：</td>
                            <td id="guest-count0">入住人数：</td>
                          </tr>
                        </table>
                      </div>
                      <button type="button" class="btn-style-1" data-toggle="modal" data-target="#modify-search-Modal"><i class="fas fa-search"></i>修改 </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- filter widget end -->
            <!-- filter widget -->

            <!-- filter widget end -->
            <!-- filter widget -->
            <!-- filter widget end -->
            <!-- help us -->
            <div class="help-us mb-30">
              <h3>帮助</h3>
              <p>如果你有任何疑问请随时拨打酒店电话联系我们.</p>
              <a class="view-detail-btn" href=""><i class="fas fa-phone-alt"></i> 联系我们</a> </div>
            <!-- help us end -->
          </div>
          <!-- sidebar end -->
        </aside>
      </div>
      <div class="col-lg-9">
        <!-- hotel results list -->
        <div class="hotel-results-list">
          <!-- list box -->
          <div class="list-box mb-30" id="room-list">

          </div>
          <!-- list box end -->
          <!-- list box -->

          <!-- list box end -->
          <!-- list box -->

          <!-- list box end -->
          <!-- list box -->

          <!-- list box end -->
        </div>

        <!-- hotel results list end -->
        <!-- pagination -->

        <!-- pagination end -->
      </div>
    </div>
  </div>
</div>
<!-- ================ Listing page end ================ -->

<!-- ================ Footer area ================ -->
<footer class="pt-50">
  <div class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-lg-3 col-md-3 col-sm-6 mb-30">
          <!-- title -->
          <div class="title mb-10">
            <h3>关于我们</h3>
          </div>
          <!-- title end -->
          <!-- text -->
          <div class="text">
            <p>Lorem ipsum dolor sit amet sectetur adipiscing elit amet consectetur scing elit amet consectetur adipiscing elit sed et eletum.</p>
            <p>Lorem ipsum dolor sit amet sectetur adipiscing elit amet consectetur scing elit amet.</p>
          </div>
          <!-- end text -->
          <!-- footer social -->
          <div class="footer-social"> <a href=""><i class="fab fa-facebook-square"></i></a> <a href=""><i class="fab fa-twitter-square"></i></a> <a href=""><i class="fab fa-linkedin"></i></a> <a href=""><i class="fab fa-pinterest-square"></i></a> <a href=""><i class="fab fa-google-plus-square"></i></a> </div>
          <!-- footer social end -->
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6 mb-30">
          <!-- title -->
          <div class="title mb-10">
            <h3>导航</h3>
          </div>
          <!-- title end -->
          <!-- footer link -->
          <ul class="footer-link">
            <li><i class="fas fa-caret-right"></i> <a href="#">Home</a> </li>
            <li><i class="fas fa-caret-right"></i> <a href="#">About Us</a> </li>
            <li><i class="fas fa-caret-right"></i> <a href="#">Services</a> </li>
            <li><i class="fas fa-caret-right"></i> <a href="#">Projects</a> </li>
            <li><i class="fas fa-caret-right"></i> <a href="#">Blog</a> </li>
            <li><i class="fas fa-caret-right"></i> <a href="#">Faq</a> </li>
            <li><i class="fas fa-caret-right"></i> <a href="#">Contact</a> </li>
          </ul>
          <!-- footer link end -->
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6 mb-30">
          <!-- title -->
          <div class="title mb-10">
            <h3>近期新闻</h3>
          </div>
          <!-- title end -->
          <!-- recent-posts -->
          <div class="footer-recent-post">
            <!-- footer recent post item -->
            <div class="footer-recent-post-item"> <a href="">
              <p>Lorem ipsum dolor sit amet sectetur adipiscing elit amet</p>
              <small><i class="far fa-calendar-alt pr-6"></i> 01 Oct 2020</small></a> </div>
            <!-- footer recent post item end -->
            <!-- footer recent post item -->
            <div class="footer-recent-post-item"> <a href="">
              <p>Lorem ipsum dolor sit amet sectetur adipiscing elit amet</p>
              <small><i class="far fa-calendar-alt pr-6"></i> 01 Oct 2020</small></a> </div>
            <!-- footer recent post item end -->
            <!-- footer recent post item -->
            <div class="footer-recent-post-item"> <a href="">
              <p>Lorem ipsum dolor sit amet sectetur adipiscing elit amet</p>
              <small><i class="far fa-calendar-alt pr-6"></i> 01 Oct 2020</small></a> </div>
            <!-- footer recent post item end -->
          </div>
          <!-- recent-posts end -->
        </div>
        <div class="col-lg-3 col-md-3 col-sm-6 mb-30">
          <!-- title -->
          <div class="title mb-10">
            <h3>通讯</h3>
          </div>
          <!-- title end -->
          <!-- footer newsletter text -->
          <div class="footer-newsletter-text">
            <p>Lorem ipsum dolor sit amet sectetur adipiscing elit amet consectetur scing elit sed et eletum.</p>
          </div>
          <!-- footer newsletter text end -->
          <!-- footer newsletter form -->
          <div class="footer-newsletter-form">
            <form>
              <input placeholder="Email Adress..." type="text" required>
              <button type="submit">Subscribe</button>
            </form>
          </div>
          <!-- footer newsletter form end -->
        </div>
      </div>
    </div>
  </div>
  <!-- footer copyright -->
  <div class="copyright text-center mt-20">Copyright &copy; 2021.Company name All rights reserved.</div>
  <!-- footer copyright end -->
</footer>
<!-- ================ Footer area end ================ -->

<!-- ================ Top scroll ================ -->
<a href="#" class="scroll-top">Top</a>
<!-- ================ Top scroll end ================ -->

<!-- Modify search modal -->
<div class="modal fade" id="modify-search-Modal" tabindex="-1" role="dialog" aria-labelledby="modify-search-Modal" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">

        <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <span aria-hidden="true">&times;</span> </button>
      </div>
      <div class="modal-body">
        <form class="form-style-1">
          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-6">
              <div class="form-group">
                <input type="text" class="form-control" id="check-in" placeholder="入住时间">
              </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-6">
              <div class="form-group">
                <input type="text" class="form-control" id="check-out" placeholder="退房时间">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-lg-6 col-md-6 col-sm-6 col-6">
              <div class="form-group">
                <select class="form-control" id="room-count">
                  <option>房间数</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                </select>
              </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-6">
              <div class="form-group">
                <select class="form-control" id="guest-count">
                  <option>人数</option>
                  <option>1</option>
                  <option>2</option>
                  <option>3</option>
                  <option>4</option>
                </select>
              </div>
            </div>
          </div>
          <button  type="button" class="btn-style-1 w-100" onclick="updateContent()" id="search-button1" >搜索</button>
        </form>
      </div>
    </div>
  </div>
</div>
<!-- Modify search modal end -->

<!-- js files -->
<script src="js/jquery-3.5.1.min.js"></script>
<script src="js/bootstrap.bundle.min.js"></script>
<!-- counter js -->
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/waypoints.min.js"></script>
<script src="js/jquery.counterup.min.js"></script>
<!-- venobox js -->
<script src="js/venobox.min.js"></script>
<!-- owl carousel -->
<script src="js/owl.carousel.min.js"></script>
<!-- portfolio js -->
<script src="js/jquery.mixitup.min.js"></script>
<!-- datepicker js -->
<script src="js/datepicker.min.js"></script>
<!-- script js -->
<script src="js/custom.js"></script>
<script>
  function updateContent() {
    // 获取搜索参数的值
    var checkIn = document.getElementById('check-in').value;
    var checkOut = document.getElementById('check-out').value;
    var roomCount = document.getElementById('room-count').value;
    var guestCount = document.getElementById('guest-count').value;
    if (checkIn > checkOut)
  {
  alert("时间选择有问题！");
    return;
  }
    // 发送搜索参数到后端
    var searchData = {
      checkIn: checkIn,
      checkOut: checkOut,
      roomCount: roomCount,
      guestCount: guestCount
    };
    console.log(searchData);
    // 发送数据到后端（示例使用Fetch API）
    fetch('/search-rooms', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(searchData)
    })
            .then(response => response.json())
            .then(data => {
              // 获取从后端返回的数据
              console.log(data);
              var roomNumbers = data.rooms;
// 获取房间列表容器
              const roomListContainer = document.getElementById('room-list');
              // 处理返回的房间号数据
              for (var i = 0; i < roomNumbers.length; i++) {
                var roomNumber = roomNumbers[i].roomId;
                console.log(roomNumber);
                // 进行进一步的操作，比如将房间号展示在页面上或者其他逻辑处理
                // 假设房间号为 roomNumber
                // sessionStorage.setItem('roomNumber', roomNumber);
                // 更新页面内容
                document.getElementById('check-in-date0').textContent = checkIn;
                document.getElementById('check-out-date0').textContent = checkOut;
                document.getElementById('room-count0').textContent = roomCount + ' 间';
                document.getElementById('guest-count0').textContent = guestCount + ' 人';
                var linkUrl = "hotel-detail.html?room=" + roomNumber;
                // 创建房间列表元素
                const roomItem = document.createElement('div');
                roomItem.classList.add('list-box');
                roomItem.innerHTML = `
      <div class="list-box-carousel">
        <figure class="item">
          <img src="img/listing/featured-img/img-01.jpg" alt="img description">
        </figure>
      </div>
      <div class="list-box-content">
        <div class="list-box-title">
          <h3>${roomNumber}</h3>
          <address>
            <i class="fas fa-map-marker-alt"></i> 四川省成都市西华路56号附3 · ~4.6 千米
          </address>
        </div>
        <div class="list-box-rating">
          <span class="at-stars">
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="far fa-star"></i>
          </span>
          <em>520 评价</em>
        </div>
        <ul class="hotel-featured">
          <li><span><i class="fas fa-car"></i> 停车便利</span></li>
          <li><span><i class="fas fa-bath"></i> 独立卫浴</span></li>
          <li><span><i class="fas fa-home"></i> 清扫服务</span></li>
          <li><span><i class="fas fa-swimming-pool"></i> 游泳池</span></li>
        </ul>
        <div class="btn-wrapper mt-20 d-inline-block w-100">
          <a class="view-detail-btn" href="hotel-detail.html?room=${roomNumber}">详情</a>
        </div>
      </div>

    `;

                // 将房间列表元素添加到页面中
                console.log(roomItem);
                roomListContainer.appendChild(roomItem);
              }


            })
            .catch(error => {
              console.error('搜索房间请求失败:', error);
            });


    // 阻止表单提交
    // event.preventDefault();
  }
</script>
</body>
</html>